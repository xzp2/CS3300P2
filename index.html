<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Amatic+SC' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Josefin+Slab' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=News+Cycle' rel='stylesheet' type='text/css'>
<style>
html{
 overflow:hidden;
}
body{
  background: #333;
}
a:hover{
  color:orange;
}
a {
  color:#98e51d;
}
h1 {
  color: #85ce19;
  font: 60px 'Amatic SC';
  /*text-transform: uppercase;*/
  font-weight:bold;
  text-align: center;
  margin-top:-10px;
}
h1:hover {
  color:#fcb316;
  cursor:pointer;
}
h2 {
  text-align:center;
  color: #cef424;
  margin-top:-35px;
  text-transform: uppercase;
  font: 20px 'Josefin Slab';
  font-weight:bold;
}
h3 {
  font:13px 'Varela Round';
  font-weight:bold;
  margin:0px;
  padding:0px;
}
h4 {
  font:30px 'Abel';
  font-weight:bold;
  margin-top:10px;
  text-transform: uppercase;
  color: #fff;
  text-align:left;
  background-color: orange;
  width:105px;
  padding:10px;
  border-radius:15px;
}
h4:hover {
  color:#000;
  cursor:pointer;
}
input{
  font: 13px 'Varela Round';
  border-radius:20px;
  float:right;
  margin-right: 50px;
  background-color: #eeeeee;
  border: none;
  color: black;
  width:350px;
  height:50px;
  padding: 15px 32px;
  text-align: center;
  display: inline-block;
  -webkit-transition-duration: 0.4s;
    transition-duration: 0.4s;
}
form{
  padding-top: 40px;
}
.background {
  fill: #333;
}
.buttons{
  margin-left: 1000px;
}
.state {
  fill: #eee;
}
#state-borders {
  fill: none;
  stroke: #aaa;
  stroke-width: 1.5px;
}
.state:hover{
  fill: #555;
   -webkit-transition-duration: 0.6s;
    transition-duration: 0.6s;
}
#svgMap{
  float:left;
}
#blurb{
  width:80%;
  overflow:auto;
  height:100%;
  font: 17px 'News Cycle';
  margin-top:3000px;
  /*text-align:center;*/
  color:#fff;
  margin-left:30px;
  line-height:28px;
}
.axis path, .axis line{
  fill: none;
  stroke: none
  shape-rendering: crispEdges;
}
.axis text {
  font-family: 'Varela Round';
  font-size: 13px;  
  paint-order: stroke;
  fill: #ffffff;
  stroke: #000000;
  stroke-width:3px;
}
.container{
  margin-top:-30px;
}
.one:hover{
  background-color: #ff0000; 
  color: white;
}
.two:hover{
  background-color: #551a8b; 
  color: white;
}
.three:hover{
  background-color: #5E2612; 
  color: white;
}
.four:hover{
  background-color: #0000ff; 
  color: white;
}
.five:hover{
  background-color: #2E8B57; 
  color: white;
}
.six:hover{
  background-color: #8B008B; 
  color: white;
}
.seven:hover{
  background-color: #9C661F; 
  color: white;
}
.eight:hover{
  background-color: #c90449; 
  color: white;
}
u {
  font-size:9pt;
}
div.tooltip {
  position: absolute;
  text-align: center;
  width: 60px;
  height: 12px;
  padding: 8px;
  margin-top: 30px;
  margin-left:30px;
  font: 20px 'Varela Round';
  margin-top: -20px;
  font: 10px 'Open Sans';
  background: #ea9905;
  border-radius: 15px;
}
</style>
</head>
<body>
  <h1><span style="font-size:30px">click here -></span> The Bigfoot Phenomenon <span style="font-size:30px"><- click here</span></h1>
  <h2>debunking popular myths on an american tall-tale</h2>
<div class="container">
  <div id="svgMap"></div>
  <div id="colorKey" style="float:right;margin-bottom:-450px;margin-left:1000px;margin-top:-500px"></div>
  <div class="buttons" style="padding-top:32px">

    <form ><input class="one" type="button" value="Population" onclick="setMap('pop'); setScale('pop');"></input></form>

    <form ><input class="two" type="button" value="Average Temperature (F)" onclick="setMap('temp'); setScale('temp');"></input></form>

    <form ><input class="three" type="button" value="Mean Elevation (Feet)" onclick="setMap('elev'); setScale('elev');"></input></form>

    <form ><input class="four" type="button" value="Average Rainfall (Inches per Year)" onclick="setMap('rain'); setScale('rain');"></input></form>

    <form ><input class="five" type="button" value="Forest Cover (%)" onclick="setMap('forest'); setScale('forest');"></input></form>

    <form ><input class="six" type="button" value="Marijuana Users (% Used at least Once)" onclick="setMap('drug'); setScale('drug');"></input></form>

    <form ><input class="seven" type="button" value="Alcohol Consumption (Gallons per Capita)" onclick="setMap('alcohol'); setScale('alcohol');"></input></form>

    <form ><input class="eight" type="button" value="Urban Area (%)" onclick="setMap('urban'); setScale('urban');"></input></form>
  </div>
</div>
<div id="blurb">
  <h4>go back</h4>
  Bigfoot is one of the most widely known monster tall-tales known to modern-day Americans. Also known as Sasquatch, this ape-like creature is said to wander around parts of North-America, often trying to stay hidden in secluded locations. Due to lack of scientific data on the creature, most people believe Bigfoot to be a fraud or some kind of old wives' tale. However, this doesn't mean that people do not continue to believe in the sightings of the monster even up until today.<br><br>We conducted a survey asking what state in the USA people thought had the most number of annual Bigfoot sightings and why. This is our visualization of data variables that people commonly associated with Bigfoot and their correlation with the actual number of sightings.
  The <font style="color:orange"><b>footprints</b></font> on the graph represent the number of Bigfoot sightings, and you can see the size key on the right of the map.
  The <font style="color:orange"><b>buttons</b></font> on the right change the map to correlate with a different variable. 
  The <font style="color:orange"><b>color key</b></font> above the buttons is the scale for each set of data.
<<<<<<< HEAD
  <br>
  <h6><span style="font-size:25px;color:orange">Sources:</span> </h6>
    <span style="font-size:15px;line-height:18px">
      Bfro: The Bigfoot Researchers Organization: <a href="http://www.bfro.net/gdb/">http://www.bfro.net/gdb/</a> <br>
=======
  <br><br>
  Go ahead and click the "Go Back" button to get started!<br>
  <h6><span style="font-size:20px">Sources:</span><br>
    Bfro: The Bigfoot Researchers Organization: <a href="http://www.bfro.net/gdb/">http://www.bfro.net/gdb/</a> <br>
>>>>>>> ece5badf88bddc2646b8ccb4bb99149c993d967a
    US Census Bereau Urban and Rural Classification - <a href="https://www.census.gov/geo/reference/ua/uafaq.html">https://www.census.gov/geo/reference/ua/uafaq.html</a><br>
    Mean Elevations of States - <a href="http://www.netstate.com/states/tables/state_elevation_mean.htm">http://www.netstate.com/states/tables/state_elevation_mean.htm </a><br>
    LiveScience Marijuana Usage by State - <a href="http://i.livescience.com/images/i/000/071/713/i02/pot-map1.png?1415133010 ">http://i.livescience.com/images/i/000/071/713/i02/pot-map1.png?1415133010 </a><br>
    Nowak, David J. Tree and Impervious Cover in the United States - <a href="http://www.sciencedirect.com/science/article/pii/S0169204612001193">http://www.sciencedirect.com/science/article/pii/S0169204612001193 </a><br>
    Current Results Average Temperature - <a href="https://www.currentresults.com/Weather/US/average-annual-state-temperatures.php">https://www.currentresults.com/Weather/US/average-annual-state-temperatures.php</a> <br>
    Current Results Average Annual Rainfall - <a href="https://www.currentresults.com/Weather/US/average-annual-state-precipitation.php">https://www.currentresults.com/Weather/US/average-annual-state-precipitation.php</a> <br>
    Statista Alcohol Consumption per Capita - <a href="http://www.statista.com/statistics/442848/per-capita-alcohol-consumption-of-all-beverages-in-the-us-by-state/">http://www.statista.com/statistics/442848/per-capita-alcohol-consumption-of-all-beverages-in-the-us-by-state/</a></span>

</div>
<script>
$('h1').click(function(){
    $('html,body').animate({
        scrollTop: $("#blurb").offset().top},
        500);
});
$('h4').click(function(){
    $('html,body').animate({
        scrollTop: 0}, 500);
});


var names;
var curType = "none";
var map;
var width = 800,
    height = 500,
    active = d3.select(null);
var projection = d3.geo.albersUsa()
    .scale(1070)
    .translate([width / 2, height / 2]);
var path = d3.geo.path()
    .projection(projection);
var svg = d3.select("#svgMap").append("svg")
    .attr("width", width)
    .attr("height", height);
svg.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height);
var g = svg.append("g");
var hover = d3.select("body").append('div')
            .attr('class', 'tooltip')
            .style('opacity', 0);

//600

    g.append("image")
      .attr("height", Math.sqrt(600)*2.5)
      .attr("width", Math.sqrt(600)*2.5)
      .attr("xlink:href","footprint3.png")
      .attr("x", "88.5%")
      .attr("y", "74.25%")

    g.append("text")
      .attr("x", "97%")
      .attr("y", "80%")
      .text("600")
      .style("font-size", "12px")
      .style("font-family", "Varela Round")
      .style("fill", "white");

//400
    g.append("image")
      .attr("height", Math.sqrt(400)*2.5)
      .attr("width", Math.sqrt(400)*2.5)
      .attr("xlink:href","footprint3.png")
      .attr("x", "90%")
      .attr("y", "64.25%")

    g.append("text")
      .attr("x", "97%")
      .attr("y", "69%")
      .text("400")
      .style("font-family", "Varela Round")
      .style("font-size", "12px")
      .style("fill", "white");

//200
    g.append("image")
      .attr("height", Math.sqrt(200)*2.5)
      .attr("width", Math.sqrt(200)*2.5)
      .attr("xlink:href","footprint3.png")
      .attr("x", "92%")
      .attr("y", "56%")

    g.append("text")
      .attr("x", "97%")
      .attr("y", "60%")
      .text("200")
      .style("font-family", "Varela Round")
      .style("font-size", "12px")
      .style("fill", "white");

//100
    g.append("image")
      .attr("height", Math.sqrt(100)*2.5)
      .attr("width", Math.sqrt(100)*2.5)
      .attr("xlink:href","footprint3.png")
      .attr("x", "93.1%")
      .attr("y", "49%")

    g.append("text")
      .attr("x", "97%")
      .attr("y", "52%")
      .text("100")
      .style("font-family", "Varela Round")
      .style("font-size", "12px")
      .style("fill", "white");

//50
    g.append("image")
      .attr("height", Math.sqrt(50)*2.5)
      .attr("width",Math.sqrt(50)*2.5)
      .attr("xlink:href","footprint3.png")
      .attr("x", "94%")
      .attr("y", "43%")  
  
    g.append("text")
      .attr("x", "97%")
      .attr("y", "45%")
      .text("50")
      .style("font-family", "Varela Round")
      .style("font-size", "12px")
      .style("fill", "white");

//10
    g.append("image")
      .attr("height", Math.sqrt(10)*2.5)
      .attr("width", Math.sqrt(10)*2.5)
      .attr("xlink:href","footprint3.png")
      .attr("x", "95.25%")
      .attr("y", "37.5%")  
  
    g.append("text")
      .attr("x", "97%")
      .attr("y", "39%")
      .text("10")
      .style("font-family", "Varela Round")
      .style("font-size", "12px")
      .style("fill", "white");
//

d3.json("us.json", function(error, us) {
  names = us;
  map = g.append("g")
  //.attr("id", "states")
  .selectAll("path")
  .data(topojson.feature(us, us.objects.states).features)
  .enter().append("path")
  .attr("d", path)
  .attr("class", "state")
  .attr("id",function(d){return d.properties.stateName.replace(/ /g,"");})
  .on("mousemove", function(d) {
    var f = d3.format("0,000");
    hover.style("opacity", .9);
    hover.classed('hidden', false)
    .style("left", (d3.event.pageX + 60) + "px"  )
    .style("top", (d3.event.pageY - 130) + "px")
    .style("height", "35%")
    .style("width", "13%")
    .html(
      "<h3>" + d.properties.stateName + "</h3> " + 
      "<br/><b>Number of Sightings:</b> " + d.properties.numSight + 
      "<br/><b>Most recent report:</b> " + d.properties.mostRecent + 
      "<br/> <br/> <u>Demographics</u><br/> <br/><b>Population:</b> " + f(d.properties.Pop) + 
      "<br/><b>Avg. Annual Temp:</b> " + d.properties.Temp + 
      "<br/><b>Avg. Elevation:</b> " + f(d.properties.Elev) + 
      "<br/><b>Avg. Rainfall:</b> " + d.properties.Rain + 
      "<br/><b>Avg. Forest Cover:</b> " + d.properties.Forest + 
      "<br/><b>Drug Usage:</b> " + d.properties.Drug + 
      "<br/><b>Alcohol Usage:</b> " + d.properties.Alcohol + 
      "<br/><b>Percent Urban Area:</b> " + d.properties.urbArea+ "");  
    d3.select("#"+d.properties.stateName.replace(/ /g,"")).style("fill","#555"); 
    })
  .on("mouseout", function(d) {
    map.style("-webkit-transition-duration", ".4s").style("transition-duration", ".4s;")
    hover.attr("style", "opacity:0");
    d3.select("#"+d.properties.stateName.replace(/ /g,"")).style("fill","#eee"); 
    });
  g.append("path") 
      .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
      .attr("id", "state-borders")
      .attr("d", path);
});
d3.json("us.json", function(error, us) {
  svg.selectAll("img")
      .data(topojson.feature(us, us.objects.states).features)
    .enter().append("image")
      .attr("transform", function(d) { 
        if(path.centroid(d) != "NaN,NaN") {
          var c = path.centroid(d);
          var commaIndex = c.indexOf(",");
          var c1 = c[0];
          var c2 = c[1];
          if(d.properties.stateName == "Massachusetts"){
            var stringToReturn = (c1-(d.properties.numSight/18)-5) + "," + (c2-(d.properties.numSight/20)-7);
          }
          else if(d.properties.stateName == "California"){
            var stringToReturn = (c1-(d.properties.numSight/18)-7) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "Minnesota"){
            var stringToReturn = (c1-(d.properties.numSight/18)-10) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "Pennsylvania"){
            var stringToReturn = (c1-(d.properties.numSight/18)) + "," + (c2-(d.properties.numSight/20)-10);
          }
          else if(d.properties.stateName == "North Carolina"){
            var stringToReturn = (c1-(d.properties.numSight/18)) + "," + (c2-(d.properties.numSight/20)-10);
          }
          else if(d.properties.stateName == "Virginia"){
            var stringToReturn = (c1-(d.properties.numSight/18)) + "," + (c2-(d.properties.numSight/20)-5);
          }
          else if(d.properties.stateName == "New York"){
            var stringToReturn = (c1-(d.properties.numSight/18)) + "," + (c2-(d.properties.numSight/20)-7);
          }
          else if(d.properties.stateName == "Tennessee"){
            var stringToReturn = (c1-(d.properties.numSight/18)-10) + "," + (c2-(d.properties.numSight/20)-7);
          }
          else if(d.properties.stateName == "Illinois"){
            var stringToReturn = (c1-(d.properties.numSight/18)-5) + "," + (c2-(d.properties.numSight/20)-7);
          }
          else if(d.properties.stateName == "Kentucky"){
            var stringToReturn = (c1-(d.properties.numSight/18)-5) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "Louisiana"){
            var stringToReturn = (c1-(d.properties.numSight/18)-10) + "," + (c2-(d.properties.numSight/20)-7);
          }
          else if(d.properties.stateName == "New Hampshire"){
            var stringToReturn = (c1-(d.properties.numSight/18)-5) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "Florida"){
            var stringToReturn = (c1-(d.properties.numSight/18)+10) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "West Virginia"){
            var stringToReturn = (c1-(d.properties.numSight/18)-10) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "Rhode Island"){
            var stringToReturn = (c1-(d.properties.numSight/18)-2) + "," + (c2-(d.properties.numSight/20));
          }
          else if(d.properties.stateName == "Maryland"){
            var stringToReturn = (c1-(d.properties.numSight/18)) + "," + (c2-(d.properties.numSight/20)-10);
          }
          else{
            var stringToReturn = (c1-(d.properties.numSight/18)) + "," + (c2-(d.properties.numSight/20));
          }
          
          return "translate(" + stringToReturn + ")";
        }
         })
      // .attr("r", function(d) { return (Math.sqrt(d.properties.numSight)); })
      // .attr("stroke", "#000")
      // .attr("fill", "#808080")
      // .attr("opacity", 0.3)
      .attr("height", function(d){
        return Math.sqrt(d.properties.numSight)*2.7;
      })
      .attr("width",function(d){
        return Math.sqrt(d.properties.numSight)*2.7;
      })
      .attr("xlink:href","footprint3.png")
      .attr("opacity", 0.8)
      .on("mousemove", function(d) {
        var f = d3.format("0,000");
        hover.style("opacity", .9);
        hover.classed('hidden', false)
        .style("left", (d3.event.pageX + 60) + "px"  )
        .style("top", (d3.event.pageY - 130) + "px")
        .style("height", "35%")
        .style("width", "13%")
        .html(
          "<h3>" + d.properties.stateName + "</h3> " + 
          "<br/><b>Number of Sightings:</b> " + d.properties.numSight + 
          "<br/><b>Most recent report:</b> " + d.properties.mostRecent + 
          "<br/> <br/> <u>Demographics</u><br/> <br/><b>Population:</b> " + f(d.properties.Pop) + 
          "<br/><b>Avg. Annual Temp:</b> " + d.properties.Temp + 
          "<br/><b>Avg. Elevation:</b> " + f(d.properties.Elev) + 
          "<br/><b>Avg. Rainfall:</b> " + d.properties.Rain + 
          "<br/><b>Avg. Forest Cover:</b> " + d.properties.Forest + 
          "<br/><b>Drug Usage:</b> " + d.properties.Drug + 
          "<br/><b>Alcohol Usage:</b> " + d.properties.Alcohol + 
          "<br/><b>Percent Urban Area:</b> " + d.properties.urbArea+ "");
        d3.select("#"+d.properties.stateName.replace(/ /g,"")).style("fill","#555");  
        })
    .on("mouseout", function(d) {
      hover.attr("style", "opacity:0");
      d3.select("#"+d.properties.stateName.replace(/ /g,"")).style("fill",function(){
        if(curType=='pop') {return getColor(curType,d.properties.Pop);}
        else if(curType=='temp'){return getColor(curType,d.properties.Temp);}
        else if(curType=='elev'){return getColor(curType,d.properties.Elev);}
        else if(curType=='rain'){return getColor(curType,d.properties.Rain);}
        else if(curType=='forest'){return getColor(curType,d.properties.Forest);}
        else if(curType=='drug'){return getColor(curType,d.properties.Drug);}
        else if(curType=='alcohol'){return getColor(curType,d.properties.Alcohol);}
        else if(curType=='urban'){return getColor(curType,d.properties.urbArea);}
        else{return "#eee";}
      });  
      });
});
var scale = d3.select("#colorKey").append("svg")
  .attr("width", 350)
  .attr("height", 30)
  .style("margin-left", "-15%")
  .style("margin-top", "20px")
  .style("background-color", "#eeeeee")
  .style("border-radius", "15px");
var gradient = scale.append("defs")
  .append("linearGradient")
    .attr("id", "gradient")
    .attr("x1", "0%")
    .attr("y1", "0%")
    .attr("x2", "100%")
    .attr("y2", "0%");


function getColor(type, val){
  if(type=="pop"){
    var colorScale = d3.scale.linear().domain([400000, 40000000]).range(["#fcff7c", "#ff0000"]);
    return colorScale(val);
  }
  else if(type=="temp"){
    var colorScale = d3.scale.linear().domain([25, 70]).range(["#0000ff", "#ff0000"]);
    return colorScale(val);
  }
  else if(type=="elev"){
    var colorScale = d3.scale.linear().domain([50, 7000]).range(["#4aba00", "#db1313"]);
    return colorScale(val);
  }
  else if(type=="rain"){
    var colorScale = d3.scale.linear().domain([5, 65]).range(["#ffffff", "#0000ff"]);
    return colorScale(val);
  }
  else if(type=="forest"){
    var colorScale = d3.scale.linear().domain([10, 80]).range(["#f5ff72", "#2E8B57"]);
    return colorScale(val);
  }
  else if(type=="drug"){
    var colorScale = d3.scale.linear().domain([35, 70]).range(["#ffffff", "#8B008B"]);
    return colorScale(val);
  }
  else if(type=="alcohol"){
    var colorScale = d3.scale.linear().domain([1, 4]).range(["#ffffff", "#722702"]);
    return colorScale(val);
  }
  else if(type=="urban"){
    var colorScale = d3.scale.log().domain([.01, 40]).range(["#ffffff", "#c90449"]);
    return colorScale(Math.log(val));
  }
  else{
    return "#eee";
  }
}
function setMap(type){
  curType = type;
  d3.json("us.json", function(error, us) {
    map.style("-webkit-transition-duration", "1s").style("transition-duration", "1s;")
    .style("fill",function(d){
      if(type=='pop') {return getColor(type,d.properties.Pop);}
      else if(type=='temp'){return getColor(type,d.properties.Temp);}
      else if(type=='elev'){return getColor(type,d.properties.Elev);}
      else if(type=='rain'){return getColor(type,d.properties.Rain);}
      else if(type=='forest'){return getColor(type,d.properties.Forest);}
      else if(type=='drug'){return getColor(type,d.properties.Drug);}
      else if(type=='alcohol'){return getColor(type,d.properties.Alcohol);}
      else if(type=='urban'){return getColor(type,d.properties.urbArea);}
      else{return "#eee";}
    })
    .on("mouseover",function(){
      d3.select(this).style("fill","#555");
    })
    .on("mouseout",function(d){
      if(type=='pop') {d3.select(this).style("fill",getColor(type,d.properties.Pop));}
      else if(type=='temp'){d3.select(this).style("fill",getColor(type,d.properties.Temp));}
      else if(type=='elev'){d3.select(this).style("fill",getColor(type,d.properties.Elev));}
      else if(type=='rain'){d3.select(this).style("fill",getColor(type,d.properties.Rain));}
      else if(type=='forest'){d3.select(this).style("fill",getColor(type,d.properties.Forest));}
      else if(type=='drug'){d3.select(this).style("fill",getColor(type,d.properties.Drug));}
      else if(type=='alcohol'){d3.select(this).style("fill",getColor(type,d.properties.Alcohol));}
      else if(type=='urban'){d3.select(this).style("fill",getColor(type,d.properties.urbArea));}
      else{d3.select(this).style("fill","#eee");}
      hover.attr("style", "opacity:0");
    });
  });
}
function setScale(type) {
  if(type=='pop') {
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#fcff7c");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#ff0000");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([400000, 40000000])
      .range([15, 293]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([400000, 40000000]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='temp'){
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#0000ff");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#ff0000");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
        var x = d3.scale.linear()
      .domain([25, 70])
      .range([0, 320]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([25, 70]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='elev'){
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#4aba00");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#db1313");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([50, 7000])
      .range([0, 310]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([50, 7000]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='rain'){
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#ffffff");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#0000ff");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([5, 65])
      .range([-3, 320]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([5, 65]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='forest'){
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#f5ff72");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#2E8B57");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([10, 80])
      .range([0, 320]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([10, 80]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='drug'){
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#ffffff");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#8B008B");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([35, 70])
      .range([0, 320]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([35, 70]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='alcohol'){
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#ffffff");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#722702");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([1, 4])
      .range([0, 320]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([1, 4]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
  else if(type=='urban') {
    gradient.selectAll("stop").remove();
    gradient.append("stop")
      .attr("offset", "0%")
      .attr("stop-color", "#ffffff");
    gradient.append("stop")
      .attr("offset", "100%")
      .attr("stop-color", "#c90449");
    scale.append("rect")
      .attr("width", 350)
      .attr("height", 30)
      .style("fill", "url(#gradient)");
    var x = d3.scale.linear()
      .domain([1, 40])
      .range([0, 320]);
    var axis = d3.svg.axis()
      .orient("top")
      .scale(x)
      .tickValues([.01, 40]);
    scale.append('g')
      .attr('class', 'axis')
      .attr("transform", "translate(15, 28)")
      .call(axis)
      .append("text")
      .attr("transform", "rotate(0)");
  }
}
</script>
</body>
</html>